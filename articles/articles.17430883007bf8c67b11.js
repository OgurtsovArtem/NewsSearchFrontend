!function(t){var e={};function s(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=8)}([function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{constructor(t){this.options=t}saveKey(t,e){localStorage.setItem(t,JSON.stringify(e))}getKey(t){return JSON.parse(localStorage.getItem(t))}removeKey(t){localStorage.removeItem(t)}}},function(t,e,s){"use strict";const n={navButton:document.querySelector(".button__burger"),"navСurtain":document.querySelector(".header__nav"),navAuthButton:document.querySelector(".header__button-login"),saveArticles:document.querySelector(".link-save"),loginButton:document.querySelector(".header__button-logout"),buttonText:document.querySelector(".header__button-logout-text")};e.a=n},function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{constructor(t,e){this.options=t,this.localStorage=e}navControl(){this.options.navСurtain.classList.toggle("header__nav_open"),this.options.navButton.classList.toggle("active")}colorControl(){}headerLogin(t){this.name=t,this.options.saveArticles.classList.remove("disabled"),this.options.loginButton.classList.remove("disabled"),this.options.navAuthButton.classList.add("disabled"),this.options.buttonText.textContent=this.name}headerLogout(){!0===confirm("Вы действительно хотите выйти")&&(this.options.saveArticles.classList.add("disabled"),this.options.loginButton.classList.add("disabled"),this.options.navAuthButton.classList.remove("disabled"),this.options.buttonText.textContent="Hacker",window.location.href="../index.html",localStorage.clear())}"accessСheck"(){void 0!==localStorage.authorizedUser&&(console.log("я нашел!"),this.options.buttonText.textContent=this.localStorage.getKey("authorizedUser"),this.options.navAuthButton.classList.add("disabled"),this.options.loginButton.classList.remove("disabled"),this.options.saveArticles.classList.remove("disabled"))}headerListener(){this.options.loginButton.addEventListener("click",this.headerLogout.bind(this)),this.options.navButton.addEventListener("click",this.navControl.bind(this)),this.options.navAuthButton.addEventListener("click",this.navControl.bind(this))}}},function(t,e,s){"use strict";e.a={baseUrl:"http://localhost:3000"}},function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{constructor(t,e){this.options=t,this.localStorage=e}login(t,e){return console.log(this.options.baseUrl+"/signin"),fetch(this.options.baseUrl+"/signin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status)).catch(t=>{console.log(t)})}registration(t,e,s){return fetch(this.options.baseUrl+"/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e,name:s})}).then(n=>n.ok?n.json():(console.log(JSON.stringify({email:t,password:e,name:s})),Promise.reject("Ошибка: "+n.status))).catch(t=>{console.log(t)})}getUser(t){return console.log(t),fetch(this.options.baseUrl+"/users/me",{method:"GET",credentials:"include",headers:{authorization:"Bearer "+t}}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}getArticles(){return fetch(this.options.baseUrl+"/articles",{method:"GET",credentials:"include",headers:{authorization:"Bearer "+this.localStorage.getKey("key"),"Content-Type":"application/json"}}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}postArticles(t,e,s,n,o,i,r){return fetch(this.options.baseUrl+"/articles",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:"Bearer "+this.localStorage.getKey("key")},body:JSON.stringify({keyword:t,title:e,text:s,date:n,source:o,link:i,image:r})}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status)).catch(t=>{console.log(t.massage)})}deleteArticles(t){return fetch(`${this.options.baseUrl}/cards/${t}`,{method:"DELETE",credentials:"include",headers:{authorization:"Bearer "+this.localStorage.getKey("key"),"Content-Type":"application/json"}})}}},function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{constructor({container:t,setFormatDate:e,idCreator:s,button:n,classCreate:o},i){this.container=t,this.setFormatDate=e,this.idCreator=s,this.button=n,this.classCreate=o,this.api=i,this.showСards=this.showСards.bind(this)}addCard(t,e,s,n,o,i){const r=this.classCreate(this.api).create(t,e,this.setFormatDate(s),n,o,i,this.idCreator());this.container.appendChild(r)}render(t){this.cardArr=t,this.cardArr.forEach(t=>{this.addCard(t.title,t.description,t.publishedAt,t.urlToImage,t.source.name,t.url)})}arrayControl(t){this.array=t,this.currentIndex=0,this.currentLimit=0}"showСards"(t){for(t.preventDefault(),this.currentLimit+=3,this.currentIndex;this.currentIndex<this.currentLimit&&this.currentIndex<this.array.length;this.currentIndex++)this.render([this.array[this.currentIndex]])}refreshCardList(){if(0!==this.container.childNodes.lenght)for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}listener(){this.button.addEventListener("click",this.showСards)}}},function(t,e,s){"use strict";var n=t=>new Date(t).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"});var o=()=>"f"+(~~(1e8*Math.random())).toString(16);class i{constructor(t){this.api=t,console.log(this.api)}create(t,e,s,n,o,i,r){const a=document.createElement("div"),c=document.createElement("button"),l=document.createElement("p"),d=document.createElement("img"),h=document.createElement("span"),u=document.createElement("h3"),p=document.createElement("p"),g=document.createElement("a");return a.classList.add("place-card"),c.classList.add("place-card__flag"),l.classList.add("place-card__prompt"),d.classList.add("place-card__image"),h.classList.add("place-card__date"),u.classList.add("place-card__title"),p.classList.add("place-card__text"),g.classList.add("place-card__link"),g.classList.add("link"),d.setAttribute("alt","Изображение"),d.setAttribute("src",""+n),g.setAttribute("target","_blank"),g.setAttribute("href",""+i),l.textContent="Войдите, чтобы сохранять статьи",h.textContent=s,u.textContent=t,p.textContent=e,g.textContent=o,a.dataset.id=r,a.appendChild(c),a.appendChild(l),a.appendChild(d),a.appendChild(h),a.appendChild(u),a.appendChild(p),a.appendChild(g),this.cardFlag=c,this.cardPrompt=l,this.cardTitle=u,this.cardText=p,this.cardDate=h,this.cardlink=g,this.cardImage=d,this.accessСheck(),a}promt(){this.cardPrompt.classList.toggle("place-card__prompt_visible")}deleteCard(){console.log("Пока")}"accessСheck"(){void 0!==localStorage.authorizedUser?this.loginListener():this.promtListener()}saveCard(){console.log("Привет"),this.api.postArticles("Power Point",this.cardTitle.textContent,this.cardText.textContent,this.cardDate.textContent,this.cardlink.textContent,this.cardlink.href,this.cardImage.src).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}flagControl(){this.cardFlag.classList.contains("place-card__flag_active")?(this.cardFlag.classList.remove("place-card__flag_active"),this.deleteCard()):(this.cardFlag.classList.add("place-card__flag_active"),this.saveCard())}promtListener(){this.cardFlag.addEventListener("mouseout",this.promt.bind(this)),this.cardFlag.addEventListener("mouseover",this.promt.bind(this))}loginListener(){this.cardFlag.addEventListener("click",this.flagControl.bind(this))}}const r={container:document.querySelector(".place-list__container"),setFormatDate:n,idCreator:o,button:document.querySelector(".place-list__button"),classCreate:t=>new i(t)};e.a=r},,function(t,e,s){"use strict";s.r(e);var n=s(0),o=s(1),i=s(2),r=s(3),a=s(4),c=s(6),l=s(5);const d=new n.a,h=new i.a(o.a,d);h.headerListener(),h.accessСheck();const u=new a.a(r.a,d);console.log(u.getArticles());new l.a(c.a,u)}]);