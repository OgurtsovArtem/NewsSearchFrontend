!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o={baseUrl:"https://newsapi.org/v2/",sortBy:"popularity",pageSize:"5",apiKey:"cefe7cbdc6b94355ae9ee08e1066ea96",endpoint:"everything"};var r={baseUrl:"http://newsproject.students.nomoreparties.xyz"};var i=t=>new Date(t).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"});var s=()=>"f"+(~~(1e8*Math.random())).toString(16);var a={container:document.querySelector(".place-list__container"),setFormatDate:i,idCreator:s};var l={validationLenght:"Должно быть от 2 до 30 символов",validationNull:"Это обязательное поле",validationEmail:"Неправильный формат Email"};const c={words:l,formElement:[...document.querySelector(".popup-login").querySelectorAll(".popup__input")],formImput:document.forms.login,popupButton:document.querySelector(".button__login")},d={words:l,formElement:[...document.querySelector(".popup-registration").querySelectorAll(".popup__input")],formImput:document.forms.registration,popupButton:document.querySelector(".button__registration")};class u{constructor({words:t,formElement:e,formImput:n,popupButton:o}){this.words=t,this.formElement=e,this.formImput=n,this.popupButton=o}setEventListeners(){let t=!0;this.formElement.forEach(e=>(this.checkInputValidity(e)||(t=!1),t)),this.setSubmitButtonState(t,this.popupButton)}checkInputValidity(t){let e=t.id;const n=t.nextElementSibling.id;return!0===t.validity.tooShort?(e+="-error",e===n&&(t.nextElementSibling.textContent=this.words.validationLenght),!1):!0===t.validity.valueMissing?(e+="-error",e===n&&(t.nextElementSibling.textContent=this.words.validationNull),!1):!0===t.validity.typeMismatch?(e+="-error",e===n&&(t.nextElementSibling.textContent=this.words.validationEmail),!1):(t.nextElementSibling.textContent="",!0)}setSubmitButtonState(t,e){!0===t?(e.removeAttribute("disabled"),e.classList.add("popup__button_enable")):(e.setAttribute("disabled",!0),e.classList.remove("popup__button_enable"))}listener(){this.formImput.addEventListener("input",this.setEventListeners.bind(this))}}class p{constructor(t,e){this.element=t,this.buttonOpen=e,this.buttonCloseEsc=this.element.querySelector(".popup__close"),this.buttonCloseSubmithCard=document.querySelector(".popup").querySelector(".popup__button")}open(){this.element.classList.remove("disabled")}close(){this.element.classList.add("disabled")}listener(){this.buttonOpen.addEventListener("click",this.open.bind(this)),this.buttonCloseEsc.addEventListener("click",this.close.bind(this)),this.buttonCloseSubmithCard.addEventListener("click",this.close.bind(this))}}var h=(t=0)=>{const e=new Date;e.setDate(e.getDate()-t);const n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate();return`${n}-${o<10?"0"+o:o}-${r<10?"0"+r:r}`};const m=new class{constructor({baseUrl:t,endpoint:e,sortBy:n,pageSize:o,apiKey:r}){this.baseUrl=t,this.endpoint=e,this.sortBy=n,this.apiKey=r,this.pageSize=o}getNews(t,e){return fetch(`${this.baseUrl}${this.endpoint}?q=${t}&from=${e(7)}&sortBy=${this.sortBy}&pageSize=${this.pageSize}&apiKey=`+this.apiKey).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}}(o);new class{constructor(t){this.options=t}login(t,e){return fetch(this.options.baseUrl+"/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:t,password:e})}).then(t=>t.ok?(console.log(t.json()),t.json()):Promise.reject("Ошибка: "+t.status))}registration(t,e,n){return fetch(this.options.baseUrl+"/signup",{method:"POST",headers:{authorization:this.options.headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({login:t,password:e,name:n})}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}getUser(){return fetch(this.options.baseUrl+"/users/me",{method:"GET",headers:{authorization:this.options.headers.authorization,"Content-Type":"application/json"}}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}getArticles(){return fetch(this.options.baseUrl+"/articles",{method:"GET",headers:{authorization:this.options.headers.authorization,"Content-Type":"application/json"}}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}postArticles(t,e,n,o,r,i,s){return fetch(this.options.baseUrl+"/signup",{method:"POST",headers:{authorization:this.options.headers.authorization,"Content-Type":"application/json"},body:JSON.stringify({keyword:t,title:e,text:n,date:o,source:r,link:i,image:s})}).then(t=>t.ok?t.json():Promise.reject("Ошибка: "+t.status))}deleteArticles(t){return fetch(`${this.options.baseUrl}/cards/${t}`,{method:"DELETE",headers:{authorization:this.options.headers.authorization,"Content-Type":"application/json"}})}}(r).login("ogurcov.artem2012@list.ru","42222322");const b=new class extends class{constructor(){}create(t,e,n,o,r,i,s){const a=document.createElement("div"),l=document.createElement("button"),c=document.createElement("p"),d=document.createElement("img"),u=document.createElement("span"),p=document.createElement("h3"),h=document.createElement("p"),m=document.createElement("a");return a.classList.add("place-card"),l.classList.add("place-card__flag"),c.classList.add("place-card__prompt"),d.classList.add("place-card__image"),u.classList.add("place-card__date"),p.classList.add("place-card__title"),h.classList.add("place-card__text"),m.classList.add("place-card__link"),m.classList.add("link"),d.setAttribute("alt","Изображение"),d.setAttribute("src",""+o),m.setAttribute("target","_blank"),m.setAttribute("href",""+i),c.textContent="Войдите, чтобы сохранять статьи",u.textContent=n,p.textContent=t,h.textContent=e,m.textContent=r,a.dataset.id=s,a.appendChild(l),a.appendChild(c),a.appendChild(d),a.appendChild(u),a.appendChild(p),a.appendChild(h),a.appendChild(m),a}deleteCard(){}saveCard(){}}{constructor({container:t,setFormatDate:e,idCreator:n}){super(),this.container=t,this.setFormatDate=e,this.idCreator=n}addCard(t,e,n,o,r,i){const s=this.create(t,e,this.setFormatDate(n),o,r,i,this.idCreator());this.container.appendChild(s)}render(t){this.cardArr=t,this.cardArr.forEach(t=>{this.addCard(t.title,t.description,t.publishedAt,t.urlToImage,t.source.name,t.url)})}}(a),g=new u(c),y=new u(d);g.listener(),y.listener();const f=document.querySelector(".popup-login"),_=document.querySelector(".popup-registration"),S=document.querySelector(".popup__button-another-form"),v=new p(f,document.querySelector(".header__button-login")),C=new p(_,S);v.listener(),C.listener(),m.getNews("Трамп",h).then(t=>{console.log(t.articles),b.render(t.articles)})}]);